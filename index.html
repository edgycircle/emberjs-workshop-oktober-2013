<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Ember Starter Kit</title>
  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

  <script type="text/x-handlebars">
    <h2>Der Zeitverkäufer</h2>

    <ul id="navigation">
      <li>{{#link-to 'projects'}}Projekte{{/link-to}}</li>
      <li>{{#link-to 'tasks'}}Aufgaben{{/link-to}}</li>
      <li>{{#link-to 'time_entries'}}Zeiteinträge{{/link-to}}</li>
    </ul>

    <div id="content">
      {{outlet}}
    </div>

    <div id="sidebar">
      {{render 'sidebar'}}
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="sidebar">
    {{#if activeTimeEntry}}
      {{time activeTimeEntry.duration}}
      <br><br>
      {{activeTimeEntry.task.name}}<br>
      {{activeTimeEntry.task.project.name}}
      <br><br>
      <button {{action stopWorking}}>Arbeit beenden</button>
    {{else}}
      {{#if selectedTask}}
        {{partial 'autosuggest/selected_task'}}
      {{else}}
        {{partial 'autosuggest/input'}}
      {{/if}}
    {{/if}}

    <br><br><br>

    {{#each mostRecentTasks}}
      {{this.name}}<a {{action workOn this}} href="#"> ></a><br>
    {{/each}}
  </script>

  <script type="text/x-handlebars" data-template-name="autosuggest/selected_task">
    {{selectedTask.name}}
    <br>
    <em>{{selectedTask.project.name}}</em>
    <br>
    <a href="#" {{action deselectTask}}>Aufgabe ändern</a>

    <br><br>
    <button {{action workOnTask}}>An Aufgabe arbeiten</button>
  </script>

  <script type="text/x-handlebars" data-template-name="autosuggest/input">
    {{input valueBinding="inputValue" placeholder="Aufgabe"}}
    <br><br>
    {{#each suggestedTasks}}
      <span {{action suggestedTaskSelected this}}>{{this.name}} (<em>{{this.project.name}}</em>)</span><br>
    {{/each}}
    <br>
    {{view Ember.Select
                viewName="select"
                contentBinding="projects"
                optionLabelPath="content.name"
                optionValuePath="content.id"
                prompt="Projekt wählen"
                selectionBinding="selectedProject"}}

    <br><br>
    <button {{action createAndWorkOnTask}} {{bindAttr disabled=disableCreateAndWorkOnTaskButton}}>Aufgabe erstellen und starten</button>
  </script>

  <script type="text/x-handlebars" data-template-name="projects">
    Projekte {{#link-to 'projects.new'}}Neues Projekt erstellen{{/link-to}}
    <hr>
    {{#each}}
      {{name}}<br>

      {{#each task in tasks}}
        {{task.name}}<br>

        {{#each entry in task.timeEntries}}
          {{entry.duration}}
        {{/each}}

      {{/each}}

    {{/each}}
  </script>

  <script type="text/x-handlebars" data-template-name="projects/new">
    <form {{ action createProject on="submit" }}>
      Neues Projekt<br>
      Name: {{view Ember.TextField valueBinding="name"}}
      <button>Erstellen</button>
    </form>
  </script>

  <script type="text/x-handlebars" data-template-name="tasks">
    Aufgaben
    <hr>
    {{#each}}
      {{name}}<br>

      {{#each timeEntry in timeEntries}}
        Dodl
        {{timeEntry.duration}}
      {{/each}}

    {{/each}}
  </script>

  <script type="text/x-handlebars" data-template-name="time_entries">
    Zeiteinträge
    <hr>
    {{#each}}
      {{startedAt}} - {{endedAt}} - {{duration}}<br>
    {{/each}}
  </script>

  <script src="js/libs/jquery-1.9.1.js"></script>
  <script src="js/libs/handlebars-1.0.0.js"></script>
  <script src="js/libs/ember-1.0.0.js"></script>
  <script src="js/libs/ember-data-1.0.0-beta.3.js"></script>

  <script src="js/app.js"></script>
  <script src="js/router.js"></script>

  <script src="js/routes/application_route.js"></script>
  <script src="js/routes/index_route.js"></script>
  <script src="js/routes/projects_route.js"></script>
  <script src="js/routes/projects_new_route.js"></script>
  <script src="js/routes/tasks_route.js"></script>
  <script src="js/routes/time_entries_route.js"></script>

  <script src="js/models/project.js"></script>
  <script src="js/models/task.js"></script>
  <script src="js/models/time_entry.js"></script>

  <script src="js/controllers/sidebar_controller.js"></script>

  <script src="js/helpers/time_helper.js"></script>

  <script src="js/fixtures.js"></script>
</body>
</html>
